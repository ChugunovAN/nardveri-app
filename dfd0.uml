@startuml Заказы
actor Покупатель #LightCoral
actor Банк as "Банк" #Yellow
participant АппПродажи as "Модуль Продажи" #LightGreen
entity Заказы #LightGreen
participant АппЗакупки as "Модуль Закупки" #LightCyan
actor Поставщик as "Поставщик" #LightCyan

group Создание заказа
    Покупатель -> АппПродажи: Сайт\nМобильное приложение
    АппПродажи-> Заказы: создание
    АппПродажи --> Заказы: расчет срока поставки
    АппЗакупки --> Поставщик: запрос сроков поставки
    Поставщик --> АппЗакупки: подтверждение сроков поставки
    АппЗакупки --> АппПродажи: расписание поставок
    group Предоплата
        АппПродажи --> Заказы: расчет предоплаты
        АппПродажи --> Банк: счет на оплату
        Банк --> АппПродажи: подтверждение оплаты
        АппПродажи ---> Заказы: В работу
    end
end

@enduml

@startuml ОбработкаЗаказов

entity Заказы #LightGreen
participant АппЗакупки as "Модуль Закупки" #LightCyan
entity ЗаказыПоставщику as "Заказы поставщику" #LightCyan
actor Поставщик as "Поставщик" #LightCyan
actor ДоставкаПоставщик as "Доставка" #BlueViolet
participant АппПродажи as "Модуль Продажи" #LightGreen
actor Склад #LightCoral

group Обработка заказов
    Заказы --> АппЗакупки: Заказы для обработки
    АппЗакупки --> ЗаказыПоставщику: планирование закупки
    ЗаказыПоставщику --> АппЗакупки: реестр для отправки
    АппЗакупки --> Поставщик: отправка заказа
    Поставщик --> АппЗакупки: подтверждение принятия в работу
    АппЗакупки --> ЗаказыПоставщику: статус обработки
    Поставщик --> АппЗакупки: подтверждение сроков отправки
    АппЗакупки --> ЗаказыПоставщику: статус обработки
    АппЗакупки --> ДоставкаПоставщик: заказ рейса
    ДоставкаПоставщик --> АппЗакупки: подтверждение рейса
    Поставщик --> АппЗакупки: отправка
    АппЗакупки --> ЗаказыПоставщику: статус обработки
    ДоставкаПоставщик --> АппЗакупки: подтверждение получения
    АппЗакупки --> ЗаказыПоставщику: статус обработки
    ЗаказыПоставщику --> АппПродажи: статус обработки\nсроки поставки
    АппПродажи --> Заказы: статус обработки\nсроки поставки
end

group Поступление на склад
    ДоставкаПоставщик --> Склад: поступление на склад
    Склад --> АппЗакупки: подтверждение поступления\nотражение брака
    АппЗакупки --> Заказы: авторезервирование
end
@enduml

@startuml ОтгрузкаЗаказов
actor Банк as "Банк" #Yellow
participant АппПродажи as "Модуль Продажи" #LightGreen
entity Заказы as "Заказы" #LightGreen
actor Склад #LightCoral
actor ДоставкаПокупатель as "Доставка" #BlueViolet
actor Покупатель
group Доплата по заказам
    Заказы --> АппПродажи: Заказы для доплаты
    АппПродажи --> Банк: Счет на оплату
    Банк --> АппПродажи: Подтверждение оплаты
    АппПродажи ---> Заказы: К отгрузке
end
group Доставка заказов
    Заказы ---> Склад: Реестр отгрузки
    Склад ---> Покупатель: Отгрузка
    Склад ---> ДоставкаПокупатель: Передача в доставку
    ДоставкаПокупатель ---> Покупатель: Получение
    Покупатель ---> АппПродажи: Подтверждение доставки
    АппПродажи ---> Заказы: Заказ закрыт
end

@enduml
